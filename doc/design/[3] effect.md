# 副作用

解决逻辑模型需要对外界产生副作用的情况，当内部状态变化，函数执行时，可以允许“订阅”相关的事件进行广播

问题：是否允许watch 状态或计算的变化，来修改另外一个状态

不允许，这种情况应该分别使用 computed 和 添加内部计算逻辑，副作用不应跟自己嵌套

考虑到复杂的情况，参考了AOP的编程思想，副作用和拦截器互相结合使用

- 前
  - 状态修改前
  - 计算执行前
- 后
  - 状态修改后
  - 计算执行后

```javascript
// 这里用effect感觉有点混淆
// 接收一个3元数组

// state1变化后，state2变化前，
// 1.这种case有必要吗？2.如果有，中间函数的执行时机是什么时候？1的变化后执行（跟没有2没有区别）还是2的变化前（跟单纯的2的变化前只有略微区别）
effect(
  [state, inputCompute], 
  () => {
    // 记录日志，双写，逻辑拦截
  },
  [state2, inputCompute2]
)

// state变化后，计算执行后
effect(
  [state, inputCompute], 
  () => {
    // 记录日志，双写，逻辑拦截
  },
)
// state2变化前，计算执行前
effect(
  () => {
    // 记录日志，双写，逻辑拦截
  },
  [state2, inputCompute2]
)
```