# context refactor

- Runner
  - only receive a BM as initial parameter
  - call init method with
    - BM's arguments
    - Context from another side

- CurrentRunnerScope
  - add new property "context"
  - add new property "currentInputCompute" maybe null, structure:
    - inputCompute and draftContext tuple
      - comments: draftContext is shallow copy from original Context preventing Proxy Object.freeze error
  - migrate directly hook operating to Context
    - addHook
    - proxy applyContext method from Context
  - subscribe onUpdate event from Context
  - commitPatches
    - arguments:
      - fromHook
      - final value
      - patches
    - detect if under InputCompute
      - yes:
        - commit to draftContext (might with patches)
      - no:
        - update original context directly

- Context (a new added Class)
  - hook tuple array
    - 0: hook object by Hook
    - 1: hook's memoized data
  - applyContext
    - arguments: 
      - contextData: hook tuple array from another side
        - 0: undefined for waiting the Hook
        - 1: received memoized data
    - set received contextData to self's hooks

- hookFactory: mountHookFactory / updateHookFactory
  - detect if with context
    - yes: set updateHookFactory to current global flag
    - no: set mountHookFactory to current global flag

